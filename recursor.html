<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />

  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width" />

  <title>PowerDNS Control Center</title>
  
  <!-- Included CSS Files (Uncompressed) -->
  <!--
  <link rel="stylesheet" href="stylesheets/foundation.css">
  -->

  <link rel="stylesheet" href="DataTables-1.9.4/media/css/demo_page.css">
  <link rel="stylesheet" href="DataTables-1.9.4/media/css/demo_table.css">  
  <link rel="stylesheet" href="DataTables-1.9.4/media/css/demo_table_jui.css">  
  <link rel="stylesheet" href="DataTables-1.9.4/media/css/jquery.dataTables.css">  
  <link rel="stylesheet"  href="DataTables-1.9.4/media/css/jquery.dataTables_themeroller.css">

  
  <!-- Included CSS Files (Compressed) -->
  <link rel="stylesheet" href="stylesheets/foundation.min.css">
  <link rel="stylesheet" href="stylesheets/app.css">
 <script type="text/javascript" src="javascripts/moment.min.js"></script>
  <script src="javascripts/modernizr.foundation.js"></script>

  <!-- IE Fix for HTML5 Tags -->
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

</head>
<body>

  <div class="row">
      <div class="twelve columns">
      <table style="border: 0"><tr><td valign="middle">
      <a href="/camel"><img class="logo"
      src="http://wiki.powerdns.com/trac/chrome/common/Logo.gif"></a></td>
      <td valign="middle"><h2>PowerDNS Control Server</h2></td></tr></table>
      <hr>
  </div>
  <div class="row">

    <div class="twelve columns">
      <H2 id="server-name"></h2>
      <p>Running <strong><span id="version"></span></strong>, up since <span id="uptime"></span>.</p>
      <p>
      <ul class="button-group four-up even">
        <li><a href="#" class="alert button">Shutdown</a></li>
        <li><a href="#" class="button">Restart</a></li>
        <li><a href="#" class="button" onClick="$('#flushModal').reveal({close: function(){ $('#flushSpinner').html(''); }});">Flush cache</a></li>
        <li><a href="#" class="button">Deploy</a></li>
      </ul>

      <hr>
      </p>
      	<dl class="tabs">
	  <dd class="active"><a href="#simple1">Graph</a></dd>
  	  <dd><a href="#simple2">Statistics</a></dd>
  	  <dd><a href="#simple3">Domains</a></dd>
  	  <dd><a href="#simple4">Configuration</a></dd>
	</dl>
	<ul class="tabs-content">
	  <li class="active" id="simple1Tab"><img src="https://xs.powerdns.com/munin/localdomain/localhost.localdomain/pdns_rec_cache-day.png"></li>
	  <li id="simple2Tab"><table id="statistics"></table></li>
	  <li id="simple3Tab">Domains..</li>	  
	  <li id="simple4Tab"><table id="config"></table></li>
	</ul>
    </div>  
  </div>
      
  
  <!-- Included JS Files (Uncompressed) -->
  <!--
  
  <script src="javascripts/jquery.js"></script>
  <script src="javascripts/jquery.foundation.mediaQueryToggle.js"></script>
  <script src="javascripts/jquery.foundation.forms.js"></script>
  <script src="javascripts/jquery.foundation.reveal.js"></script>
  <script src="javascripts/jquery.foundation.orbit.js"></script>
  <script src="javascripts/jquery.foundation.navigation.js"></script>
  <script src="javascripts/jquery.foundation.buttons.js"></script>
  <script src="javascripts/jquery.foundation.tabs.js"></script>
  <script src="javascripts/jquery.foundation.tooltips.js"></script>
  <script src="javascripts/jquery.foundation.accordion.js"></script>
  <script src="javascripts/jquery.placeholder.js"></script>
  <script src="javascripts/jquery.foundation.alerts.js"></script>
  <script src="javascripts/jquery.foundation.topbar.js"></script>
  <script src="javascripts/jquery.foundation.joyride.js"></script>
  <script src="javascripts/jquery.foundation.clearing.js"></script>
  <script src="javascripts/jquery.foundation.magellan.js"></script>
  -->
  
  <!-- Included JS Files (Compressed) -->
  <script src="javascripts/jquery.js"></script>
  <script src="javascripts/foundation.min.js"></script>
  <script src="javascripts/jquery.dataTables.min.js"></script>  
  <!-- Initialize JS Plugins -->
  <script src="javascripts/app.js"></script>
  <script src="javascripts/purl.js"></script>
  
    <script>
    $(function() {
        var url = $.url().param("url");
        $("#server-name").html($.url().param("server-name"));        
        console.log(url);
	$.getJSON(url+'/?stats&callback=?', function(data) {
		var flat=[];
		$.each(data, function(e){
		  flat.push([e, data[e]]);
		  });
		  
		$("#version").html("3.5-pre"); // data["version"]);
		moment.lang('en');
		console.log("Uptime: "+data["uptime"]);
		var startup = moment().subtract('seconds', data["uptime"]);
		$("#uptime").html(startup.format('LLLL') + " ("+startup.fromNow()+")");  
		$("#statistics").dataTable( { aaData: flat, iDisplayLength:
		  50, aoColumns:
					   [{sTitle: "variable"}, {sTitle: "value"}]}); });

	$.getJSON(url+'/?config&callback=?', function(data) {
		var flat=[];
		$.each(data, function(e){
		  flat.push([e, data[e]]);
		  });
		  

		
		
		$("#config").dataTable( { aaData: flat, iDisplayLength:
		  50, aoColumns:
					   [{sTitle: "variable"}, {sTitle: "value"}]}); });


    });
    </script> 
  
</body>
</html>
